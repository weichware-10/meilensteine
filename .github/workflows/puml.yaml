name: render-puml
on:
  push:
    paths:
      - 'meilenstein_03/**'
jobs:
  render:
    runs-on: ubuntu-latest
    steps:
      - name: checkout
        uses: actions/checkout@v2
      - name: List PUML files
        run: find ./meilenstein_03 -type f \( -iname "*.puml" \)
      - name: run plantuml
        run: |
          pip install plantuml
          find ./meilenstein_03 -type f \( -iname "*.puml" \) -exec python -m plantuml {} \;
      - name: Commit and push changes
        run: |
          git config --global user.name "joshuajeschek"
          git config --global user.email "joshua.jeschek@gmail.com"
          git add -A
          git commit -m "UML rerender"
          git push
